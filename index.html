<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>ArrowFight 3D</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      /* 隐藏body窗口区域滚动条 */
    }
  </style>
  <!--引入three.js三维引擎-->
  <script src="./three.js"></script>
  <script src="./cannon.js"></script>
  <script src="./OBJLoader.js"></script>
  <script src="MTLLoader.js"></script>
  <script src="Water2.js"></script>
  <script src="./3DG.js"></script>
  <!-- <script src="http://www.yanhuangxueyuan.com/threejs/build/three.js"></script> -->
</head>

<body>
  <div id="game">
    <div id="map" style="position: absolute;bottom: 0"></div>
  </div>
  <script>
    var env = new Env(scene,destination,camera,renderer,timeCloud,player,rocket);
    var physic = new Physic(phyWorld,destinationPhysic,playerPhysic);
    var map = new MiniMap(scene,destination,player,renderer,camera,timeCloudMap);
    env.init();
    physic.init();
    physic.freshPhysic();
    env.fresh();
    map.init();
    render();

    document.addEventListener('mousedown', function(){
      document.body.requestPointerLock();
    });
    document.body.addEventListener('mousemove',function(event){
      if (document.pointerLockElement === document.body){
        player[0].rotateY(-1*event.movementX/500);
        camera[0].rotateY(-1*event.movementX/500);
        player[0].rotateX(-1*event.movementY/500);
        camera[0].rotateX(-1*event.movementY/500);
        }
    });
    document.onkeydown=function(event){
      keyCode[event.keyCode] = true;
    }
    document.onkeyup=function(event){
      keyCode[event.keyCode] = false;
    }

    setInterval("arriveDestination(env,physic,map)",10);
    setInterval(function (){
      //physic.freshPhysic();
      //console.log(timeCloud);
    },1000);
  </script>
</body>

</html>